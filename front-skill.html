<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>大前端技能图谱</title>
  <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
  <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
  <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
  <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
  <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
  <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
  <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
  <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
  <script src="data/front-skill.json"></script>
  <link rel="fluid-icon" href="https://avatars3.githubusercontent.com/u/8733239?s=120" title="GitHub">
  <link rel="shortcut icon" href="https://avatars3.githubusercontent.com/u/8733239?s=240" type="image/x-icon">
</head>

<body>
  <div id="main"></div>
</body>

<style>
  #main {
    width: 100%;
    height: 98vh;
  }
</style>

<script type="text/javascript">
  var myChart = echarts.init(document.getElementById('main'));
  var app = {};
  option = null;

  function colorMappingChange(value) {
    var levelOption = getLevelOption(value);
    chart.setOption({
      series: [{
        levels: levelOption
      }]
    });
  }

  var formatUtil = echarts.format;

  function getLevelOption() {
    return [
      {
        itemStyle: {
          normal: {
            borderWidth: 2,
            gapWidth: 4
          }
        },
        upperLabel: {
          normal: {
            show: false
          }
        }
      },
      {
        colorSaturation: [0.35, 0.5],
        itemStyle: {
          normal: {
            borderWidth: 2,
            gapWidth: 3,
            borderColorSaturation: 0.69
          },
        }
      },
      {
        colorSaturation: [0.35, 0.5],
        itemStyle: {
          normal: {
            borderWidth: 2,
            gapWidth: 3,
            borderColorSaturation: 0.62
          }
        }
      },
      {
        colorSaturation: [0.35, 0.5],
        itemStyle: {
          normal: {
            borderWidth: 2,
            gapWidth: 2,
            borderColorSaturation: 0.52
          }
        }
      }
    ];
  }

  myChart.setOption(option = {

    title: {
      text: 'JavaScript暸望塔--大前端技能图谱',
      left: 'center'
    },

    tooltip: {
      formatter: function (info) {
        var value = info.value;
        var treePathInfo = info.treePathInfo;
        var treePath = [];

        for (var i = 1; i < treePathInfo.length; i++) {
          treePath.push(treePathInfo[i].name);
        }

        return [
          '<div class="tooltip-title">' + formatUtil.encodeHTML(treePath.join('/')) + '</div>',
        ].join('');
      }
    },

    series: [
      {
        name: 'JavaScript暸望塔',
        type: 'treemap',
        visibleMin: 300,
        label: {
          show: true,
          formatter: '{b}'
        },
        upperLabel: {
          normal: {
            show: true,
            height: 30
          }
        },
        itemStyle: {
          normal: {
            borderColor: '#fff'
          }
        },
        levels: getLevelOption(),
        data: data
      }
    ]
  });
</script>
<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b56d58eb9b155bb93221933343a9c83d";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

</html>